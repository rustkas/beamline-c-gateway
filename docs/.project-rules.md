# Project Rules

---

## Proof-First Culture

### Rule: Claims Require Cryptographic Proof

**Any claim "исправлено" / "fixed" MUST include**:

1. **Git commit SHA** (exact version)
2. **Proof pack location** (artifacts/proof-packs/<timestamp>/)
3. **SHA256 verification** (checksums.txt)

**Forbidden**:
- ❌ "Fixed in Step 1583"
- ❌ "Trust me"
- ❌ "You have old version"

**Required**:
- ✅ Commit: 97371dd85d3385787814efcf7de657beeb58ea10
- ✅ Proof: artifacts/proof-packs/20251228_121500/
- ✅ Verify: sha256sum -c checksums.txt

---

## Generating Proof

### Command
```bash
./scripts/generate_proof_pack.sh
```

### Result
```
artifacts/proof-packs/YYYYMMDD_HHMMSS/
├── commit_sha.txt       # Exact commit
├── checksums.txt        # SHA256 of key files
├── source_<SHA>.tar.gz  # Source archive
├── build_*.log          # Build evidence
└── MANIFEST.md          # Verification guide
```

---

## CI Enforcement

### Automated Proof on Release

CI MUST generate proof pack for:
- Merge to main
- Release tags
- Production deployments

See: `.gitlab-ci.yml` proof_pack job

---

## Documentation Organization

### Root (user-facing only)
- `README.md` - Project overview
- `LICENCE.md` - License

### docs/dev/ (developer docs)
- `STATUS.md` - Development status
- `FINAL_PROOF.md` - Proof of requirements
- `PROOF.md` - Initial fixes proof
- `PROOF_SYSTEM.md` - Proof system docs

### docs/implementation/ (task/fix details)
- `tasks/` - Task completion
- `fixes/` - Bug fix documentation

---

## Code Quality

### Benchmarks MUST
- Use ipc_protocol.h (single source of truth)
- Validate response version/type (no garbage)
- Follow socket priority: CLI > ENV > default
- Generate real artifacts (no fake data)

### E2E MUST
- Use SYS_/INFO_/PERF_ taxonomy
- Generate checks.tsv with schema_version
- Include failed_checks in summary.json
- Use READY markers in logs

### CI MUST
- Build all binaries
- Run benchmark suite
- Generate E2E evidence
- Check readiness claims (no subjective %)
- Generate proof pack

---

## Artifact Requirements

### Benchmarks
- `exit_codes.tsv` - Real exit codes
- `summary.json` - Parsed metrics (not empty!)
- `checks.tsv` - Load test results

### E2E
- `checks.tsv` - With schema_version
- `summary.json` - With failed_checks array
- `*.log` - With READY markers

### Proof Packs
- `commit_sha.txt`
- `checksums.txt`
- `source_<SHA>.tar.gz`
- `MANIFEST.md`

---

## Trust Model

**We trust**:
- Git commit SHAs
- SHA256 cryptographic hashes
- Reproducible builds
- CI automation

**We don't trust**:
- "Step numbers"
- "Trust me" claims
- Subjective markdown percentages
- Manual assertions

---

**Principle**: Math > Claims  
**Culture**: Proof-first  
**Enforcement**: CI automated

See: `docs/dev/PROOF_SYSTEM.md`
